package com.paloit.kata.model;import java.math.BigDecimal;import java.math.MathContext;import java.math.RoundingMode;import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;import java.util.List;public class Facture {    private final List<LigneFacture> ligneFactures;    private final Float pttc;    private final Float montantTaxe;    public Facture() {        ligneFactures = Collections.emptyList();        pttc = 0f;        montantTaxe = 0f;    }    private Facture(List<LigneFacture> ligneFactures, Float pttc, Float montantTaxe) {        this.ligneFactures = ligneFactures;        this.pttc = pttc;        this.montantTaxe = montantTaxe;    }    public List<LigneFacture> getLigneFactures() {        return ligneFactures;    }    public Float getPttc() {        return pttc;    }    public Float getMontantTaxe() {        return montantTaxe;    }    public Facture addLigneFacture(final LigneFacture ligneFacture) {		float prixHT = ligneFacture.getQuantite() * ligneFacture.getProduit().getPrixUT();		float montantTaxe = new BigDecimal(				ligneFacture.getProduit().getTaxe() * prixHT / 100)				.round(new MathContext(3, RoundingMode.HALF_UP)).floatValue();		float prixTTC = prixHT + montantTaxe;		ligneFacture.setPrixHT(prixHT);		ligneFacture.setPrixTTC(prixTTC);		List<LigneFacture> lFact = new ArrayList<>();		lFact.addAll(ligneFactures);		lFact.add(ligneFacture);		return new Facture(lFact, pttc+prixTTC, this.montantTaxe + montantTaxe);    }}